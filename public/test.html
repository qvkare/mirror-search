<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Arama Testi</title>
</head>
<body>
    <h1>Arama Motoru Debug Testi</h1>
    
    <form id="testForm">
        <input type="text" id="testInput" placeholder="Arama terimi girin" value="javascript tutorial">
        <button type="submit">Ara</button>
    </form>
    
    <div id="status"></div>
    <div id="results"></div>

    <script>
        document.getElementById('testForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const query = document.getElementById('testInput').value;
            const statusDiv = document.getElementById('status');
            const resultsDiv = document.getElementById('results');
            
            statusDiv.innerHTML = 'Aranƒ±yor...';
            resultsDiv.innerHTML = '';
            
            console.log('üîç Test arama ba≈ülatƒ±lƒ±yor:', query);
            
            try {
                const response = await fetch('/search', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        q: query,
                        engine: 'google',
                        page: 1
                    })
                });
                
                console.log('üì° Response status:', response.status);
                console.log('üì° Response headers:', response.headers);
                
                const data = await response.json();
                console.log('üìä Response data:', data);
                
                statusDiv.innerHTML = `‚úÖ Arama tamamlandƒ±! ${data.results?.length || 0} sonu√ß bulundu.`;
                
                if (data.results && data.results.length > 0) {
                    resultsDiv.innerHTML = '<h2>Sonu√ßlar:</h2>' + 
                        data.results.map(result => `
                            <div style="border: 1px solid #ccc; padding: 10px; margin: 10px 0;">
                                <h3><a href="${result.link}" target="_blank">${result.title}</a></h3>
                                <p>${result.snippet}</p>
                                <small>${result.link}</small>
                            </div>
                        `).join('');
                } else {
                    resultsDiv.innerHTML = '<p>Sonu√ß bulunamadƒ±.</p>';
                }
                
            } catch (error) {
                console.error('‚ùå Arama hatasƒ±:', error);
                statusDiv.innerHTML = '‚ùå Hata olu≈ütu: ' + error.message;
            }
        });
    </script>
</body>
</html> 